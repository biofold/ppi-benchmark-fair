<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELIXIR PPI - Machine Learning Pipeline Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #4689a3; /* #3498db; */
            --accent-color: #e74c3c;
            --light-bg: #f8f9fa;
            --success-color: #27ae60;
            --warning-color: #f39c12;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: var(--light-bg);
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header - Matching index.html */
        header {
            background: linear-gradient(135deg, var(--primary-color),#4689a3); /* #1a252f); */
            color: white;
            padding: 50px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 40px;
            border-radius: 12px;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
            padding: 0 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .badges {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            text-decoration: none;
            transition: transform 0.3s ease;
        }
        
        .badge:hover {
            transform: translateY(-2px);
        }
        
        .badge.ml {
            background: linear-gradient(135deg, var(--secondary-color), #2980b9);
            color: white;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }
        
        .badge.cv {
            background: linear-gradient(135deg, var(--success-color), #219653);
            color: white;
        }
        
        .badge.pdb {
            background: linear-gradient(135deg, var(--warning-color), #d68910);
            color: white;
        }
        
        .badge.biopython {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .badge.sklearn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }
        
        .badge.github {
            background-color: #333;
            color: white;
        }
        
        .dashboard-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background-color: rgba(255,255,255,0.15);
            color: white;
            padding: 6px 6px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 400;
            transition: all 0.3s ease;
            border: 2px solid rgba(255,255,255,0.3);
            margin-top: 20px;
        }
        
        .dashboard-link:hover {
            background-color: rgba(255,255,255,0.25);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Section Cards - Matching index.html */
        .section {
            background-color: white;
            margin: 30px 0;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border-left: 5px solid var(--secondary-color);
        }
        
        h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2::before {
            content: "ü§ñ";
            font-size: 1.5rem;
        }
        
        h2.pdb::before {
            content: "üß¨";
        }
        
        h2.cv::before {
            content: "üìä";
        }
        
        h2.usage::before {
            content: "üöÄ";
        }
        
        h2.output::before {
            content: "üìÅ";
        }
        
        h3 {
            color: var(--primary-color);
            margin: 20px 0 10px;
            font-size: 1.3rem;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background-color: #f8f9fa;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        /* Lists */
        ul, ol {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .feature-box {
            margin: 25px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid var(--secondary-color);
        }
        
        .feature-list li {
            list-style-type: none;
            padding-left: 25px;
            position: relative;
        }
        
        .feature-list li:before {
            content: "‚úÖ";
            position: absolute;
            left: 0;
        }
        
        /* Code blocks */
        code {
            /* background-color: #f1f1f1; */
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #e8e8e8; /* #f8f9fa; */
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            /* border-left: 4px solid var(--secondary-color); */
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        /* Workflow visualization */
        .workflow {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .workflow-step {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 180px;
            transition: transform 0.3s ease;
        }
        
        .workflow-step:hover {
            transform: translateY(-5px);
        }
        
        .step-number {
            background: var(--secondary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .workflow-arrow {
            display: flex;
            align-items: center;
            color: var(--secondary-color);
            font-size: 1.5rem;
        }
        
        /* Output preview */
        .output-preview {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .output-line {
            margin: 2px 0;
        }
        
        .output-info {
            color: #3498db;
        }
        
        .output-success {
            color: #27ae60;
        }
        
        .output-warning {
            color: #f39c12;
        }
        
        .output-error {
            color: #e74c3c;
        }
        
        /* Footer */
        footer {
            background-color: var(-secondary-color);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-top: 60px;
            border-radius: 12px;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .footer-link {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-link:hover {
            color: white;
        }
        
        .copyright {
            margin-top: 30px;
            color: rgba(255,255,255,0.6);
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        /* Model comparison */
        .model-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 25px 0;
        }
        
        .model-card {
            flex: 1;
            min-width: 250px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-top: 5px solid;
            transition: transform 0.3s ease;
        }
        
        .model-card:hover {
            transform: translateY(-5px);
        }
        
        .model-card.rf {
            border-top-color: var(--secondary-color);
        }
        
        .model-card.svm {
            border-top-color: var(--success-color);
        }
        
        .model-card.lr {
            border-top-color: var(--warning-color);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .section {
                padding: 20px;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
            
            .badges {
                flex-direction: column;
                align-items: center;
            }
            
            .badge {
                width: 90%;
                text-align: center;
            }
            
            .workflow {
                flex-direction: column;
                align-items: center;
            }
            
            .workflow-arrow {
                transform: rotate(90deg);
                margin: 10px 0;
            }
            
            .model-cards {
                flex-direction: column;
            }
            
            .footer-links {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <h3 style="color:white"><strong>ELIXIR Protein-Protein Interaction Benchmark
                </strong></h3>
                <h1><strong>Machine Learning</strong></h1>
                <div>
                <a href="https://github.com/biofold/ppi-benchmark-fair">
                <img src="https://img.shields.io/badge/FAIR_Score-87.5%2F100-brightgreen" alt="FAIR Score: 87.5/100"></a>
                <a href="https://creativecommons.org/licenses/by/4.0/">
                <img src="https://img.shields.io/badge/License-CC%20BY%204.0-lightgrey.svg" alt="License: CC BY 4.0"></a>
                <a href="https://doi.org/10.5281/zenodo.XXXXXXX">
                <img src="https://zenodo.org/badge/DOI/10.5281/zenodo.XXXXXXX.svg" alt="DOI"></a>
                <a href="https://www.python.org/">
                <img src="https://img.shields.io/badge/Python-3.8%2B-blue.svg" alt="Python 3.8+"></a>
                <a href="https://schema.org/">
                <img src="https://img.shields.io/badge/Metadata-Schema.org%2BBioschemas-blue" alt="Schema.org+Bioschemas"></a>
                <a href="https://mlcommons.org/croissant/">
                <img src="https://img.shields.io/badge/ML-Croissant_1.0-yellow" alt="MLCommons Croissant"></a>
                </div>
                <!--
                <div class="badges">
                    <span class="badge ml">Machine Learning</span>
                    <img src="https://img.shields.io/badge/ML-Machine%20Learning-success">
                    <span class="badge cv">GroupKFold Cross-Validation</span>
                    <span class="badge pdb">Structural Feature Extraction</span>
                    <span class="badge biopython">BioPython Integration</span>
                    <span class="badge sklearn">Scikit-learn</span>
                    <a href="index.html" class="badge github">
                        <i class="fas fa-home"></i> Main FAIR Page
                    </a>
                </div>
                -->
                
                <p style="margin: 25px 0; font-size: 1.1rem; max-width: 800px; margin-left: auto; margin-right: auto;">
                    A comprehensive Python script for training and evaluating machine learning models on the ELIXIR PPI benchmark dataset with advanced cross-validation, feature evaluation, and structural feature extraction from PDB/mmCIF files.
                </p>
                
                <div>
                    <a href="./index.html" class="dashboard-link">
                        <i class="fas fa-home"></i> FAIR Metadata
                    </a>
                    <a href="#quick-start" class="dashboard-link">
                        <i class="fas fa-rocket"></i> Quick Start
                    </a>
                    <a href="#output-example" class="dashboard-link">
                        <i class="fas fa-eye"></i> Example Output
                    </a>
                    <a href="#examples" class="dashboard-link">
                        <i class="fas fa-code"></i> Examples
                    </a>
                    <!--
                    <a href="index.html" class="dashboard-link" style="background-color: rgba(255,255,255,0.25);">
                        <i class="fas fa-arrow-left"></i> Back to FAIR Metadata
                    </a>
                    -->
                </div>
            </div>
        </header>

        <main>
            <!-- Overview -->
            <section class="section">
                <h2>Script Overview</h2>
                <p>The <code>ppi_ml_croissant.py</code> script provides an end-to-end machine learning pipeline for protein-protein interaction (PPI) classification. It combines:</p>
                
                <div class="model-cards">
                    <div class="model-card rf">
                        <h3><i class="fas fa-sitemap"></i> FAIR Data Loading</h3>
                        <p>Loads Croissant-formatted JSON-LD metadata from local directories or GitHub repositories</p>
                    </div>
                    <div class="model-card svm">
                        <h3><i class="fas fa-dna"></i> Structural Feature Extraction</h3>
                        <p>Extracts interface features from PDB/mmCIF files (residues within 10√Ö distance)</p>
                    </div>
                    <div class="model-card lr">
                        <h3><i class="fas fa-chart-line"></i> Advanced ML Pipeline</h3>
                        <p>GroupKFold cross-validation, feature evaluation, and multiple ML models</p>
                    </div>
                </div>
                
                <div class="feature-box">
                    <h4>Key Features:</h4>
                    <ul class="feature-list">
                        <li><strong>Cluster-Aware Validation</strong>: GroupKFold CV ensures all interfaces from the same sequence cluster stay together</li>
                        <li><strong>Structural Biology Integration</strong>: Extracts interface residues within 10√Ö using BioPython</li>
                        <li><strong>Case Sensitivity Handling</strong>: Automatically handles uppercase/lowercase PDB file names</li>
                        <li><strong>Gzipped File Support</strong>: Works directly with .pdb.gz and .cif.gz files (no decompression needed)</li>
                        <li><strong>Comprehensive Feature Evaluation</strong>: ANOVA, mutual information, PCA, correlation analysis</li>
                        <li><strong>Multiple ML Models</strong>: Random Forest, SVM, Logistic Regression with hyperparameter tuning</li>
                        <li><strong>Visualization Suite</strong>: ROC curves, confusion matrices, feature importance plots</li>
                    </ul>
                </div>
            </section>

            <!-- Quick Start -->
            <section class="section" id="quick-start">
                <h2 class="usage">Quick Start Examples</h2>
                
                <h3>Basic Usage</h3>
                <pre><code># Basic usage with local dataset
python ppi_ml_croissant.py --local ./bioschemas_output

# With structural feature extraction (mmCIF format)
python ppi_ml_croissant.py --local ./bioschemas_output --extract-pdb-features

# With PDB format
python ppi_ml_croissant.py --local ./bioschemas_output --extract-pdb-features --pdb-format

# Quick mode (reduced output)
python ppi_ml_croissant.py --local ./bioschemas_output --quick</code></pre>
                
                <h3>Advanced Usage</h3>
                <pre><code># Full pipeline with all features
python ppi_ml_croissant.py \
  --local ./bioschemas_output \
  --extract-pdb-features \
  --pdb-local-dir ./structure_files \
  --evaluate-features \
  --feature-analysis \
  --save-plots \
  --output-dir ./ml_results \
  --folds 5 \
  --random-state 42 \
  --log-level INFO

# Download structure files only
python ppi_ml_croissant.py --local ./bioschemas_output --extract-pdb-features --pdb-features-only

# Train/test split instead of CV
python ppi_ml_croissant.py --local ./bioschemas_output --test-split 0.2</code></pre>
            </section>

            <!-- Output Example -->
            <section class="section" id="output-example">
                <h2 class="output">Example Output</h2>
                
                <h3>Typical Console Output</h3>
                <div class="output-preview">
                    <div class="output-line">‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó</div>
                    <div class="output-line">‚ïë  Protein Interaction ML Classifier                         ‚ïë</div>
                    <div class="output-line">‚ïë  with GroupKFold Cross-Validation                          ‚ïë</div>
                    <div class="output-line">‚ïë  and Interface Structural Feature Extraction (10√Ö distance)‚ïë</div>
                    <div class="output-line">‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù</div>
                    <div class="output-line"></div>
                    <div class="output-line output-info">INFO: Using local directory: ./bioschemas_output</div>
                    <div class="output-line output-info">INFO: Output directory: ./ml_results</div>
                    <div class="output-line"></div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line">Step 1: Loading Croissant dataset</div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line output-success">INFO: Dataset loaded successfully!</div>
                    <div class="output-line output-info">INFO: Number of interfaces: 1677</div>
                    <div class="output-line"></div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line">Step 2: Extracting features, labels, and ClusterIDs</div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line output-success">INFO: Successfully extracted 1677 samples</div>
                    <div class="output-line output-info">INFO: Class distribution:</div>
                    <div class="output-line output-info">INFO:   Physiological (1): 844 samples</div>
                    <div class="output-line output-info">INFO:   Non-physiological (0): 833 samples</div>
                    <div class="output-line"></div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line">Step 4: Extracting Structural Features</div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line output-info">INFO: Using 1200 available interface structure files</div>
                    <div class="output-line output-info">INFO: File format: mmCIF (default)</div>
                    <div class="output-line output-info">INFO: Local directory: ./structure_files</div>
                    <div class="output-line output-success">INFO: Successfully extracted structural features for 1150 interfaces</div>
                    <div class="output-line"></div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line">Step 8: Training and evaluating models</div>
                    <div class="output-line">============================================================</div>
                    <div class="output-line output-info">INFO: --- Training Random Forest with GroupKFold CV ---</div>
                    <div class="output-line output-info">INFO:   CV Results for Random Forest:</div>
                    <div class="output-line output-success">INFO:     Average Accuracy:  0.827 (¬±0.012)</div>
                    <div class="output-line output-success">INFO:     Average Precision: 0.831 (¬±0.015)</div>
                    <div class="output-line output-success">INFO:     Average Recall:    0.824 (¬±0.018)</div>
                    <div class="output-line output-success">INFO:     Average F1-Score:  0.827 (¬±0.013)</div>
                    <div class="output-line output-success">INFO:     Average ROC-AUC:   0.898 (¬±0.008)</div>
                    <div class="output-line"></div>
                    <div class="output-line output-success">INFO: ‚úÖ Best model: Random Forest (Average F1-Score: 0.827)</div>
                </div>
                
                <h3>Generated Files Structure</h3>
                <pre><code>ml_results/
‚îú‚îÄ‚îÄ group_kfold_cv_results.json          # Complete ML results with all metrics
‚îú‚îÄ‚îÄ structural_features.csv              # Extracted PDB/mmCIF interface features
‚îú‚îÄ‚îÄ feature_evaluation_report.json       # Comprehensive feature analysis
‚îú‚îÄ‚îÄ group_kfold_cv_results.png           # CV performance visualization
‚îú‚îÄ‚îÄ feature_evaluation_plots.png         # Feature analysis visualizations
‚îú‚îÄ‚îÄ feature_importance.png               # Feature importance ranking
‚îî‚îÄ‚îÄ feature_ranking_analysis.png         # Comparison of feature ranking methods</code></pre>
                
                <h3>Example JSON Output (group_kfold_cv_results.json)</h3>
                <pre><code>{
  "Random Forest": {
    "cv_metrics": {
      "accuracy": 0.827,
      "precision": 0.831,
      "recall": 0.824,
      "f1": 0.827,
      "roc_auc": 0.898
    },
    "overall_metrics": {
      "accuracy": 0.829,
      "precision": 0.833,
      "recall": 0.826,
      "f1": 0.829,
      "roc_auc": 0.901
    },
    "fold_metrics": {
      "accuracies": [0.819, 0.831, 0.825, 0.834, 0.826],
      "precisions": [0.822, 0.836, 0.828, 0.839, 0.830],
      "recalls": [0.816, 0.830, 0.822, 0.833, 0.825],
      "f1_scores": [0.819, 0.833, 0.825, 0.836, 0.827],
      "roc_aucs": [0.895, 0.901, 0.897, 0.903, 0.894]
    }
  },
  "cross_validation_settings": {
    "n_splits": 5,
    "method": "GroupKFold cross-validation (ClusterID as groups)",
    "random_state": 42,
    "best_model": "Random Forest"
  }
}</code></pre>
                
                <h3>Visual Output Example</h3>
                <div style="text-align: center; margin: 25px 0; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
                    <p style="margin-bottom: 15px; font-style: italic;">The script generates comprehensive visualizations:</p>
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 15px;">
                        <div style="text-align: center;">
                            <div style="width: 120px; height: 90px; background: linear-gradient(135deg, #3498db, #2980b9); border-radius: 8px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                                üìà
                            </div>
                            <p><strong>ROC Curves</strong><br>Model discrimination</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 120px; height: 90px; background: linear-gradient(135deg, #e74c3c, #c0392b); border-radius: 8px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                                üìä
                            </div>
                            <p><strong>Confusion Matrices</strong><br>Error analysis</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 120px; height: 90px; background: linear-gradient(135deg, #27ae60, #219653); border-radius: 8px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                                üîç
                            </div>
                            <p><strong>Feature Importance</strong><br>Key predictors</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 120px; height: 90px; background: linear-gradient(135deg, #9b59b6, #8e44ad); border-radius: 8px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                                üéØ
                            </div>
                            <p><strong>PCA Analysis</strong><br>Dimensionality reduction</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Workflow -->
            <section class="section" id="workflow">
                <h2 class="cv">Pipeline Workflow</h2>
                
                <div class="workflow">
                    <div class="workflow-step">
                        <div class="step-number">1</div>
                        <h4>Load Dataset</h4>
                        <p>Parse Croissant JSON-LD metadata from local files or GitHub</p>
                    </div>
                    
                    <div class="workflow-arrow">‚Üí</div>
                    
                    <div class="workflow-step">
                        <div class="step-number">2</div>
                        <h4>Extract Features</h4>
                        <p>Parse interface properties, labels, and cluster IDs</p>
                    </div>
                    
                    <div class="workflow-arrow">‚Üí</div>
                    
                    <div class="workflow-step">
                        <div class="step-number">3</div>
                        <h4>Structural Features</h4>
                        <p>Extract interface residues within 10√Ö from PDB/mmCIF</p>
                    </div>
                    
                    <div class="workflow-arrow">‚Üí</div>
                    
                    <div class="workflow-step">
                        <div class="step-number">4</div>
                        <h4>Preprocess</h4>
                        <p>Scale features, handle missing values, encode categories</p>
                    </div>
                    
                    <div class="workflow-arrow">‚Üí</div>
                    
                    <div class="workflow-step">
                        <div class="step-number">5</div>
                        <h4>Train Models</h4>
                        <p>GroupKFold CV with Random Forest, SVM, Logistic Regression</p>
                    </div>
                    
                    <div class="workflow-arrow">‚Üí</div>
                    
                    <div class="workflow-step">
                        <div class="step-number">6</div>
                        <h4>Evaluate</h4>
                        <p>Generate metrics, plots, and feature importance analysis</p>
                    </div>
                </div>
            </section>

            <!-- Command Line Options -->
            <section class="section">
                <h2>Command Line Options</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>Option</th>
                            <th>Description</th>
                            <th>Default</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>--local</code></td>
                            <td>Path to local directory with dataset_with_interfaces.json</td>
                            <td>Required (or --github)</td>
                        </tr>
                        <tr>
                            <td><code>--github</code></td>
                            <td>GitHub repository URL containing dataset</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><code>--extract-pdb-features</code></td>
                            <td>Extract structural features from PDB/mmCIF files</td>
                            <td>False</td>
                        </tr>
                        <tr>
                            <td><code>--pdb-local-dir</code></td>
                            <td>Local directory for interface structure files</td>
                            <td>./structure_files</td>
                        </tr>
                        <tr>
                            <td><code>--pdb-format</code></td>
                            <td>Use PDB format (default: mmCIF)</td>
                            <td>False</td>
                        </tr>
                        <tr>
                            <td><code>--pdb-features-only</code></td>
                            <td>Only extract structural features (skip ML)</td>
                            <td>False</td>
                        </tr>
                        <tr>
                            <td><code>--folds</code></td>
                            <td>Number of cross-validation folds</td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td><code>--test-split</code></td>
                            <td>Fraction for train/test split (0 for CV only)</td>
                            <td>0.0</td>
                        </tr>
                        <tr>
                            <td><code>--evaluate-features</code></td>
                            <td>Perform comprehensive feature evaluation</td>
                            <td>False</td>
                        </tr>
                        <tr>
                            <td><code>--feature-analysis</code></td>
                            <td>Run feature importance analysis</td>
                            <td>False</td>
                        </tr>
                        <tr>
                            <td><code>--save-plots</code></td>
                            <td>Save plots to files</td>
                            <td>False</td>
                        </tr>
                        <tr>
                            <td><code>--output-dir</code></td>
                            <td>Directory to save results</td>
                            <td>./group_kfold_results</td>
                        </tr>
                        <tr>
                            <td><code>--quick</code></td>
                            <td>Run quick demo with basic output</td>
                            <td>False</td>
                        </tr>
                        <tr>
                            <td><code>--log-level</code></td>
                            <td>Logging level (DEBUG, INFO, WARNING, ERROR)</td>
                            <td>INFO</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Structural Feature Extraction -->
            <section class="section">
                <h2 class="pdb">Structural Feature Extraction</h2>
                
                <div class="feature-box">
                    <h4>What it extracts:</h4>
                    <ul class="feature-list">
                        <li><strong>Interface Residues</strong>: Unique residues per chain within 10√Ö of the other chain</li>
                        <li><strong>C-alpha Distance</strong>: Uses only C-alpha atoms for distance calculations (faster)</li>
                        <li><strong>Chain Pair Analysis</strong>: Analyzes all possible chain pairs in biological assemblies</li>
                        <li><strong>Fraction Metrics</strong>: Interface residues as fraction of total chain residues</li>
                        <li><strong>Biological Assembly Handling</strong>: Automatically generates assemblies from monomer mmCIF files</li>
                    </ul>
                </div>
                
                <h3>File Handling Features</h3>
                <pre><code># BioPython can parse gzipped files directly - no decompression needed!
- 1abc.pdb.gz    ‚Üí Direct parsing
- 1abc.cif.gz    ‚Üí Direct parsing
- 1abc.pdb       ‚Üí Regular parsing
- 1abc.cif       ‚Üí Regular parsing

# Case sensitivity handling (both work)
- 1ABC.pdb.gz    ‚Üí Uppercase PDB ID
- 1abc.pdb.gz    ‚Üí Lowercase PDB ID
- MixedCase.pdb.gz ‚Üí Automatic detection</code></pre>
                
                <h3>Example Structural Features Output</h3>
                <pre><code>interface_id,extraction_success,pdb_file,chain_ids,pdb_avg_total_interface_residues,...
1ABC_1,True,1abc.cif.gz,A-B,24.5,...
1DEF_1,True,1def.pdb.gz,C-D,18.2,...
2GHI_1,False,2ghi.cif.gz,E-F,NaN,...  # Extraction failed
3JKL_1,True,3jkl.cif.gz,G-H,32.1,...</code></pre>
            </section>

            <!-- Machine Learning Models -->
            <section class="section">
                <h2>Machine Learning Models</h2>
                
                <div class="model-cards">
                    <div class="model-card rf">
                        <h3><i class="fas fa-tree"></i> Random Forest</h3>
                        <ul>
                            <li><strong>Type</strong>: Ensemble of decision trees</li>
                            <li><strong>Strengths</strong>: Handles non-linear relationships, robust to outliers</li>
                            <li><strong>Feature Importance</strong>: Built-in importance scores</li>
                            <li><strong>Parameters</strong>: 100 estimators, random_state=42</li>
                        </ul>
                    </div>
                    
                    <div class="model-card svm">
                        <h3><i class="fas fa-project-diagram"></i> Support Vector Machine</h3>
                        <ul>
                            <li><strong>Type</strong>: Maximum margin classifier</li>
                            <li><strong>Strengths</strong>: Effective in high-dimensional spaces</li>
                            <li><strong>Kernel</strong>: RBF (Radial Basis Function)</li>
                            <li><strong>Probability</strong>: Enabled for ROC curves</li>
                        </ul>
                    </div>
                    
                    <div class="model-card lr">
                        <h3><i class="fas fa-chart-line"></i> Logistic Regression</h3>
                        <ul>
                            <li><strong>Type</strong>: Linear classifier</li>
                            <li><strong>Strengths</strong>: Interpretable, fast training</li>
                            <li><strong>Regularization</strong>: L2 penalty</li>
                            <li><strong>Max Iterations</strong>: 1000 for convergence</li>
                        </ul>
                    </div>
                </div>
                
                <h3>Typical Performance Metrics (Example Output)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Accuracy</th>
                            <th>Precision</th>
                            <th>Recall</th>
                            <th>F1-Score</th>
                            <th>ROC-AUC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Random Forest</strong></td>
                            <td>0.827</td>
                            <td>0.831</td>
                            <td>0.824</td>
                            <td>0.827</td>
                            <td>0.898</td>
                        </tr>
                        <tr>
                            <td>Support Vector Machine</td>
                            <td>0.812</td>
                            <td>0.818</td>
                            <td>0.807</td>
                            <td>0.812</td>
                            <td>0.885</td>
                        </tr>
                        <tr>
                            <td>Logistic Regression</td>
                            <td>0.798</td>
                            <td>0.804</td>
                            <td>0.793</td>
                            <td>0.798</td>
                            <td>0.872</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- GroupKFold Cross-Validation -->
            <section class="section">
                <h2 class="cv">GroupKFold Cross-Validation</h2>
                
                <div class="feature-box">
                    <h4>Why GroupKFold for PPI data?</h4>
                    <ul class="feature-list">
                        <li><strong>Prevents Data Leakage</strong>: Interfaces from the same sequence cluster are highly similar</li>
                        <li><strong>Realistic Evaluation</strong>: Simulates predicting interfaces for new protein families</li>
                        <li><strong>Cluster-Aware</strong>: All interfaces with same ClusterID stay together in same fold</li>
                        <li><strong>Stratified</strong>: Maintains class distribution across folds</li>
                    </ul>
                </div>
                
                <h3>Example Console Output for GroupKFold</h3>
                <div class="output-preview">
                    <div class="output-line output-info">INFO: === CREATING GROUPKFOLD CROSS-VALIDATION SPLITS ===</div>
                    <div class="output-line output-info">INFO:    Number of folds: 5</div>
                    <div class="output-line output-info">INFO:    Using ClusterID as groups to ensure same-cluster samples stay together</div>
                    <div class="output-line"></div>
                    <div class="output-line output-info">INFO:    Split analysis:</div>
                    <div class="output-line output-info">INFO:    Fold 1:</div>
                    <div class="output-line output-info">INFO:      Training: 1342 samples, 242 unique clusters, 678 physio (50.5%)</div>
                    <div class="output-line output-info">INFO:      Testing:  335 samples, 61 unique clusters, 166 physio (49.6%)</div>
                    <div class="output-line output-info">INFO:    Fold 2:</div>
                    <div class="output-line output-info">INFO:      Training: 1341 samples, 241 unique clusters, 675 physio (50.3%)</div>
                    <div class="output-line output-info">INFO:      Testing:  336 samples, 62 unique clusters, 169 physio (50.3%)</div>
                    <div class="output-line output-success">INFO:    No clusters appear in both train and test sets</div>
                </div>
            </section>

            <!-- Examples Section -->
            <section class="section" id="examples">
                <h2 class="usage">Complete Examples</h2>
                
                <h3>Example 1: Full ML Pipeline with Structural Features</h3>
                <pre><code># Run complete ML pipeline with structural features
python ppi_ml_croissant.py \
  --local ./bioschemas_output \
  --extract-pdb-features \
  --pdb-local-dir ./structures \
  --pdb-format \
  --evaluate-features \
  --feature-analysis \
  --save-plots \
  --output-dir ./full_ml_run \
  --folds 5 \
  --random-state 123 \
  --log-level INFO

# Expected output in ./full_ml_run:
# - group_kfold_cv_results.json      # JSON results
# - structural_features.csv          # PDB features
# - feature_evaluation_report.json   # Feature analysis
# - group_kfold_cv_results.png       # Main visualization
# - 3-4 additional plot files        # Detailed analyses</code></pre>
                
                <h3>Example 2: Quick Test Run</h3>
                <pre><code># Quick analysis for testing (minimal output)
python ppi_ml_croissant.py \
  --local ./bioschemas_output \
  --quick \
  --output-dir ./quick_test

# Console output shows:
# - Dataset statistics
# - Best model performance
# - Quick summary metrics
# Generated files are minimal</code></pre>
                
                <h3>Example 3: Download Structure Files Only</h3>
                <pre><code># Just download structure files without ML
python ppi_ml_croissant.py \
  --local ./bioschemas_output \
  --extract-pdb-features \
  --pdb-features-only \
  --pdb-local-dir ./structure_files

# Output shows:
# - Files available locally
# - Files downloaded
# - Files missing
# No ML training performed</code></pre>
            </section>

            <!-- Integration with Main FAIR Page -->
            <section class="section">
                <h2>Integration with ELIXIR FAIR Metadata</h2>
                
                <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 25px; border-radius: 10px; margin: 20px 0;">
                    <h3 style="color: #2c3e50; margin-top: 0;">
                        <i class="fas fa-link"></i> Connection to Main FAIR Metadata
                    </h3>
                    <p>This ML pipeline directly uses the <strong>FAIR-compliant metadata</strong> generated by the main ELIXIR PPI benchmark repository:</p>
                    
                    <div class="model-cards">
                        <div class="model-card" style="border-top-color: #3498db;">
                            <h4><i class="fas fa-database"></i> Data Source</h4>
                            <p>Reads <code>dataset_with_interfaces.json</code> from the FAIR metadata output</p>
                            <a href="index.html#metadata-architecture" style="display: inline-block; margin-top: 10px; color: #3498db; text-decoration: none;">
                                <i class="fas fa-external-link-alt"></i> View metadata structure
                            </a>
                        </div>
                        
                        <div class="model-card" style="border-top-color: #27ae60;">
                            <h4><i class="fas fa-tags"></i> Cluster Information</h4>
                            <p>Uses BLASTClust <code>ClusterID</code> for GroupKFold validation</p>
                            <a href="index.html#sequence-clustering-information" style="display: inline-block; margin-top: 10px; color: #27ae60; text-decoration: none;">
                                <i class="fas fa-external-link-alt"></i> View clustering details
                            </a>
                        </div>
                        
                        <div class="model-card" style="border-top-color: #9b59b6;">
                            <h4><i class="fas fa-code"></i> Croissant Format</h4>
                            <p>Leverages MLCommons Croissant 1.0 standard for ML readiness</p>
                            <a href="index.html#overview" style="display: inline-block; margin-top: 10px; color: #9b59b6; text-decoration: none;">
                                <i class="fas fa-external-link-alt"></i> View Croissant compliance
                            </a>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px; padding: 15px; background-color: white; border-radius: 8px;">
                        <p style="margin-bottom: 15px;"><strong>Complete FAIR ML Workflow:</strong></p>
                        <div style="display: inline-flex; align-items: center; gap: 10px; background: linear-gradient(135deg, #2c3e50, #3498db); color: white; padding: 12px 25px; border-radius: 50px; text-decoration: none; font-weight: 600;">
                            <i class="fas fa-arrow-right"></i> FAIR Metadata ‚Üí ML Pipeline ‚Üí Research Insights
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                <h3>ELIXIR 3D-BioInfo Machine Learning Pipeline</h3>
                <p>Advanced ML for protein-protein interaction prediction with FAIR data practices</p>
                
                <div class="footer-links">
                    <a href="index.html" class="footer-link">
                        <i class="fas fa-home"></i> Main FAIR Metadata Page
                    </a>
                    <a href="https://github.com/biofold/ppi-benchmark-fair" class="footer-link" target="_blank">
                        <i class="fab fa-github"></i> Repository
                    </a>
                    <a href="#output-example" class="footer-link">
                        <i class="fas fa-eye"></i> Example Output
                    </a>
                    <a href="#quick-start" class="footer-link">
                        <i class="fas fa-rocket"></i> Quick Start
                    </a>
                </div>
                
                <div class="copyright">
                    <p>ELIXIR PPI Machine Learning Pipeline ‚Ä¢ Script: ppi_ml_croissant.py</p>
                    <p>FAIR Principles: Findable, Accessible, Interoperable, Reusable</p>
                    <p style="margin-top: 15px; font-size: 0.85rem;">
                        This pipeline demonstrates FAIR ML practices with proper cross-validation, 
                        feature evaluation, and integration of structural biology data.
                    </p>
                </div>
            </div>
        </footer>
    </div>
</body>
</html>
