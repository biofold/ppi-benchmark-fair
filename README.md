# PPI Benchmark FAIR Metadata

This document describes the **Bioschemas-based metadata model** and the **outputs generated by the ppi_benchmark_fair.py script**. The script produces FAIR, machine-readable JSON-LD metadata for the *ELIXIR 3D-BioInfo Benchmark for Protein–Protein Interfaces*.

---

## 1. Overview

The scripts transform raw benchmark annotations, structural files, and external database information into a **Bioschemas- and Schema.org-compliant Dataset description**, suitable for:

- FAIR data publication (Zenodo, WorkflowHub)
- Google Dataset Search indexing
- ML dataset registries (Croissant-compatible)
- Structural bioinformatics reuse

The pipeline is **incremental**: each script enriches the output of the previous one without overwriting earlier information.

---

## 2. Bioschemas and Semantic Standards Used

### 2.1 Core Vocabularies

The generated metadata relies on the following standards:

- **Schema.org** – generic dataset, property, and entity modeling
- **Bioschemas** – life-science–specific extensions
- **MLCommons Croissant** – machine-learning dataset interoperability
- **EDAM Ontology** – bioinformatics topics and operations
- **Gene Ontology (GO)** – molecular function annotation

All outputs are encoded as **JSON-LD**, enabling semantic interoperability and web discoverability.

---

### 2.2 Main Bioschemas Profiles

#### Dataset (Bioschemas Dataset Profile)

Represents the complete benchmark collection.

Key properties:
- `name`, `description`
- `license` (CC-BY-4.0)
- `keywords` (EDAM terms)
- `distribution` (CSV, PDB, mmCIF files)
- `hasPart` (individual interface samples)

#### Protein (Bioschemas Protein Profile)

Represents a protein structure involved in an interface.

Key properties:
- `identifier` (PDB ID)
- `taxonomicRange`
- `hasMolecularFunction` (GO:0005515 – protein binding)
- `hasRepresentation` (PDB and mmCIF files)

#### DataCatalogItem

Represents a **single protein–protein interface**, treated as one ML sample.

Key properties:
- `identifier` (Interface ID)
- `additionalProperty` (features, labels, annotations)
- `mainEntity` (linked Protein object)

---

## 3. Scripts Overview

The script ppi_benchmark_fair.py performs a specific transformation step in the pipeline. All other elements described in this document (JSON files, HTML files, FAIR packages) are **generated outputs**, not standalone scripts.

### Dataset and Interface Metadata Generation (ppi_benchmark_fair.py)

The ppi_benchmark_fair.py that generates the dataset of protein-protein interfaces includes 4 steps:

#### 3.1.1 Base Dataset and Interface Metadata Generation

**Purpose**  
Generate the core FAIR and Bioschemas-compliant JSON-LD metadata describing the *ELIXIR 3D-BioInfo Benchmark for Protein–Protein Interfaces* using **only information provided by the benchmark GitHub repository**.

**Primary inputs**
- Benchmark CSV files from the ELIXIR repository
- Curated interface annotations (labels, features, sources)

**Key operations**
- Creates a top-level `Dataset` object (Schema.org + Bioschemas)
- Creates one `DataCatalogItem` per protein–protein interface
- Attaches ML-relevant features and labels using `additionalProperty`
- Generates a minimal `Protein` entity for each interface

**Bioschemas profiles used**
- `Dataset` (Bioschemas Dataset profile)
- `Protein` (Bioschemas Protein profile)
- `DataCatalogItem`

**What this script does NOT do**
- Does not parse PDB or mmCIF files
- Does not query the RCSB PDB API
- Does not validate chain identifiers

**Output files**
```
dataset_with_interfaces.json
interface_*.json
manifest.json
```

These outputs are fully reproducible and deterministic.


#### 3.1.2 Assembly Chain Validation and Labeling 

**Purpose**  
Validate and correct interface chain identifiers by inspecting **actual biological assembly structure files** (PDB or mmCIF).

**Primary inputs**
- JSON-LD files generated by Script 1
- Local or remote `.pdb.gz` and/or `.cif.gz` structure files

**Key operations**
- Extracts real chain identifiers from structure files
- Compares annotated `AuthChain1` / `AuthChain2` with observed chains
- Assigns validated `LabelChain1` and `LabelChain2`
- Detects homodimers and assembly mismatches
- Records validation provenance and timestamps

**Added metadata (per interface)**
Stored as `PropertyValue` entries:
- `LabelChain1`
- `LabelChain2`
- `LabelInterfaceChains`
- `ChainValidation` (JSON-encoded provenance record)

**Bioschemas impact**
- Preserves original annotations
- Extends interface and Protein entities without schema violations

**Output files**
- Updated `interface_*.json` files
- Updated `dataset_with_interfaces.json`

No new biological annotations are introduced; this step strictly validates structure consistency.


#### 3.1.3 PDB Metadata Enrichment

**Purpose**  
Enrich Protein entities with authoritative structural and biological metadata retrieved from the **RCSB PDB REST API**.

**Primary inputs**
- JSON-LD files generated by Script 2 (with validated chain labels)

**Key operations**
- Queries the RCSB PDB API using the PDB identifier
- Retrieves experimental and deposition metadata
- Extracts sequence and chain-level information
- Determines homomeric vs heteromeric state

**Added metadata (Protein level)**
Stored as `PropertyValue` entries in the `Protein` entity:
- Experimental method (e.g. X-ray, cryo-EM)
- Resolution
- Deposition and release dates
- Source organism
- Citation metadata (title, DOI)
- Chain sequences
- Homomer / heteromer classification

**Bioschemas impact**
- Extends the Bioschemas `Protein` profile with provenance-preserving annotations
- Does not modify interface-level labels or features

**Output files**
- Updated `interface_*.json` files
- Updated `dataset_with_interfaces.json`

This step is network-dependent and should be versioned for reproducibility.


#### 3.1.4 Cluster ID Annotation from BlastClust

**Purpose**  
Annotate interfaces and proteins with **cluster identifiers** derived from sequence clustering (BlastClust output).

**Primary inputs**
- JSON-LD files enriched by Script 3
- BlastClust clustering output files

**Key operations**
- Parses BlastClust cluster assignment files
- Maps protein or chain identifiers to cluster IDs
- Adds cluster identifiers to metadata without altering existing annotations

**Added metadata**
Stored as `PropertyValue` entries:
- `ClusterID`
- Optional cluster size or clustering parameters

**Bioschemas impact**
- Supports dataset stratification and non-redundant splitting
- Enables cluster-aware benchmarking and cross-validation

**Output files**
- Updated `interface_*.json` files
- Updated `dataset_with_interfaces.json`


### 3.2 Machine Learning Evaluation with Croissant (ppi_ml_croissant.py)

**Purpose**  
Evaluate machine learning methods on the benchmark dataset using **MLCommons Croissant-compliant metadata**.

**Primary inputs**
- Fully enriched JSON-LD dataset (after Scripts 1–4)

**Key operations**
- Interprets Croissant metadata to identify features and labels
- Loads benchmark data into ML pipelines
- Trains and evaluates ML models (e.g. classifiers)
- Computes performance metrics

**Outputs**
- ML evaluation results (metrics, summaries)
- Optional Croissant-compatible result descriptors

**Standards used**
- MLCommons Croissant 1.0
- Schema.org Dataset semantics

**Role in the pipeline**
This script **consumes** the FAIR metadata and validates that it is
sufficient for automated ML benchmarking.

---

## 4. Output File Summary

| File | Description |
|----|----|
| `base_metadata.json` | GitHub-only, reproducible base metadata |
| `metadata_with_label_chains.json` | Adds structural chain labels |
| `metadata_full_enriched.json` | Adds RCSB PDB metadata |
| `index.html` | Web-discoverable JSON-LD embedding |

---

## 5. Design Principles

- **Separation of concerns**: each script has a single responsibility
- **Provenance-aware**: enrichment steps are isolated
- **Schema-safe extensibility**: features stored via `additionalProperty`
- **FAIR by construction**: interoperable, reusable, and discoverable

---

## 6. Intended Use

This pipeline supports:
- ML benchmarking and reproducibility
- FAIR dataset publication
- Structural bioinformatics integration
- Automated metadata harvesting

---

*This README documents the outputs generated by the ppi_benchmark_fair.py script and their Bioschemas-compliant metadata model.*


